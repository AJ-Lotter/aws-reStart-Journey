# Compute Lab #1: Working with Amazon EBS

## Overview
In this lab, I learned how to use Amazon Elastic Block Store (EBS), a scalable, high-performance block-storage service for Amazon EC2. The key operations performed included creating an EBS volume, attaching it to an EC2 instance, creating a file system, taking a snapshot backup, and restoring that snapshot to a new volume.

## Objectives
By the end of this lab, I was able to do the following:
* Create an EBS volume.
* Attach and mount an EBS volume to an EC2 instance.
* Create a snapshot of an EBS volume.
* Create an EBS volume from a snapshot.

## AWS Services Used
* Amazon EC2 (Elastic Compute Cloud)
* Amazon EBS (Elastic Block Store)
* Amazon S3 (used internally for snapshot storage)

## Pre-requisites
* An active AWS account
* Basic familiarity with the AWS Management Console
* An existing EC2 instance named "Lab" running in a specific Availability Zone

## Steps Taken
### Task 1: Creating a new EBS volume
1. Navigated to the EC2 Management Console and noted the Availability Zone of the existing "Lab" instance.
2. Selected **Volumes** under **Elastic Block Store** in the navigation pane.
3. Clicked **Create volume** and configured:
   - Volume type: General Purpose SSD (gp2)
   - Size: 1 GiB
   - Availability Zone: Same as the "Lab" instance (us-west-2a)
   - Added a tag: Key=`Name`, Value=`My Volume`
4. Confirmed creation and waited for volume status to change from `Creating` to `Available`.

### Task 2: Attaching the volume to an EC2 instance
1. Selected the newly created `My Volume`.
2. From the **Actions** menu, selected **Attach volume**.
3. Chose the `Lab` instance from the dropdown.
4. Set the device name to `/dev/sdb`.
5. Clicked **Attach volume** and verified the volume state changed to `In-use`.

### Task 3: Connecting to the Lab EC2 instance
1. Navigated to **Instances** in the EC2 console.
2. Selected the `Lab` instance and clicked **Connect**.
3. Used the **EC2 Instance Connect** tab to open a terminal window in the browser.

### Task 4: Creating and configuring the file system
1. Ran `df -h` to view initial storage configuration.
2. Created an ext3 file system on the new volume: `sudo mkfs -t ext3 /dev/sdb`
3. Created a mount point directory: `sudo mkdir /mnt/data-store`
4. Mounted the volume: `sudo mount /dev/sdb /mnt/data-store`
5. Made the mount persistent by adding an entry to `/etc/fstab`
6. Verified the mount was successful by running `df -h` again.
7. Created a test file: `sudo sh -c "echo some text has been written > /mnt/data-store/file.txt"`
8. Verified the file content: `cat /mnt/data-store/file.txt`

### Task 5: Creating an Amazon EBS snapshot
1. Returned to the **Volumes** section in the EC2 console.
2. Selected `My Volume` and from **Actions** chose **Create snapshot**.
3. Added a tag: Key=`Name`, Value=`My Snapshot`
4. Created the snapshot and monitored its progress from `Pending` to `Completed`.
5. In the terminal, deleted the test file: `sudo rm /mnt/data-store/file.txt`
6. Verified deletion: `ls /mnt/data-store/file.txt` (confirmed "No such file or directory")

### Task 6: Restoring the Amazon EBS snapshot
#### Task 6.1: Creating a volume from the snapshot
1. Navigated to **Snapshots** and selected `My Snapshot`.
2. From **Actions**, chose **Create volume from snapshot**.
3. Selected the same Availability Zone.
4. Added a tag: Key=`Name`, Value=`Restored Volume`
5. Created the volume and waited for status `Available`.

#### Task 6.2: Attaching the restored volume
1. Selected the new `Restored Volume`.
2. From **Actions**, chose **Attach volume**.
3. Selected the `Lab` instance and set device name to `/dev/sdc`.
4. Attached the volume, confirming status changed to `In-use`.

#### Task 6.3: Mounting the restored volume
1. Created a new mount point: `sudo mkdir /mnt/data-store2`
2. Mounted the volume: `sudo mount /dev/sdc /mnt/data-store2`
3. Verified the restored file existed: `ls /mnt/data-store2/file.txt`

## Cleanup
To avoid ongoing charges, I manually cleaned up all resources in the following order:
- **Unmount volumes from the EC2 instance:**
- **Detach EBS volumes:**
- **Delete EBS volumes:**
- **Delete EBS snapshots:**
- **Terminate EC2 instance:**
  
## Wrap-up
In this lab, I successfully:
* Created a new 1 GiB gp2 EBS volume in the same Availability Zone as my EC2 instance.
* Attached the volume to the instance using the device name `/dev/sdb`.
* Formatted the volume with an ext3 file system and mounted it to `/mnt/data-store`.
* Created a snapshot backup of the EBS volume after writing test data.
* Restored the snapshot to a new EBS volume and mounted it to a different directory (`/mnt/data-store2`), verifying the test data was successfully recovered.