# Compute Lab 160: Build Your Database Server and Interact with Your DB Using an App

## Overview
This lab reinforces the concept of leveraging an AWS-managed database instance for relational database needs. Amazon Relational Database Service (Amazon RDS) simplifies the setup, operation, and scaling of a relational database in the cloud. 

## Objectives
By completing this lab, I will be able to:
- Launch an Amazon RDS DB instance with high availability.
- Configure the DB instance to permit connections from my web server.
- Open a web application and interact with my database.

## AWS Services Used
- Amazon RDS (Relational Database Service)
- Amazon VPC (Virtual Private Cloud)
- EC2 (Elastic Compute Cloud) â€“ for the web server
- Security Groups

## Architecture Diagram
<img src="./architecture-lab2.png" alt="Architecture diagram showing interaction between services." width="800"/>

## Pre-requisites
- Access to the AWS Management Console
- Lab VPC configured
- Web server EC2 instance running

## Steps Taken

### Task 1: Create a Security Group for the RDS DB Instance
1. Open the **VPC** service in AWS Management Console.
2. Navigate to **Security Groups** > **Create security group**.
3. Configure:
   - **Security group name:** DB Security Group
   - **Description:** Permit access from Web Security Group
   - **VPC:** Lab VPC
4. Add inbound rule:
   - **Type:** MySQL/Aurora (3306)
   - **Source:** Web Security Group
5. Click **Create security group**. This security group allows inbound traffic on port 3306 from EC2 instances in the Web Security Group.

### Task 2: Create a DB Subnet Group
1. Open the **RDS** service in AWS Management Console.
2. Navigate to **Subnet groups** > **Create DB Subnet Group**.
3. Configure:
   - **Name:** DB Subnet Group
   - **Description:** DB Subnet Group
   - **VPC ID:** Lab VPC
4. Add subnets in at least two Availability Zones:
   - **Availability Zone 1:** Subnet 10.0.1.0/24
   - **Availability Zone 2:** Subnet 10.0.3.0/24
5. Click **Create**. This group specifies which subnets RDS can use.

### Task 3: Create an Amazon RDS DB Instance
1. In **RDS**, go to **Databases** > **Create database**.
2. Select **Standard create** and **MySQL** engine (latest version).
3. Template: **Dev/Test**
4. Availability: **Multi-AZ DB Instance**
5. Configure DB settings:
   - **DB instance identifier:** lab-db
   - **Master username:** main
   - **Master password:** lab-password
6. Instance class: **db.t3.medium** (Burstable classes)
7. Storage: **General Purpose (SSD)**
8. Connectivity:
   - **VPC:** Lab VPC
   - **VPC security group:** DB Security Group
9. Additional configuration:
   - **Initial database name:** lab
   - Disable **Automated backups**
10. Click **Create database**. Wait ~4 minutes for deployment.
11. Copy the **Endpoint** from **Connectivity & Security**. Example:
    ```
    lab-db.cggq8lhnxvnv.us-west-2.rds.amazonaws.com
    ```

### Task 4: Interact with Your Database
1. Open the web application using the **WebServer IP address**.
2. Click the **RDS** link in the web app.
3. Configure database connection:
   - **Endpoint:** Use the copied RDS endpoint
   - **Database:** lab
   - **Username:** main
   - **Password:** lab-password
4. Click **Submit**. The application will copy information to the database.
5. Test the Address Book application by adding, editing, and removing contacts. Data persists in the database and is automatically replicated to the secondary AZ.

## Cleanup
1. Choose **End Lab** at the top of the AWS lab instructions.
2. Confirm by selecting **Yes**.
3. AWS will initiate deletion of lab resources. Close any messages indicating lab deletion has started.

## Wrap-up
I have successfully:
- Created a security group and DB subnet group.
- Launched a Multi-AZ RDS MySQL instance.
- Connected a web application to my RDS database.
- Verified data persistence and replication across Availability Zones.


