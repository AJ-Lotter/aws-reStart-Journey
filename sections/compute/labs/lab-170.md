# Compute Lab 170: Create a Website on S3

## Overview
In this lab, I will learn how to deploy a static website on Amazon S3 using the AWS CLI from an EC2 instance. I will start by connecting securely to an EC2 instance using AWS Systems Manager (SSM) and then configure the AWS CLI with my access credentials. Next, I will create an S3 bucket to store the website files and enable static website hosting.

## Objectives
1. Create an S3 bucket.
2. Create an IAM user with S3 full access.
3. Upload & host a static website on Amazon S3.
4. Choose 
## AWS Services Used
- AWS CLI (Command Line Interface)
- Amazon S3 (Simple Storage Service) 

## Pre-requisites
- AWS account with proper permissions
- EC2 instance running Amazon Linux AMI
- AWS CLi installed 

## Steps Taken
1. Connect to your EC2 instance:
   ```bash
   ssh -i <your-key>.pem ec2-user@<your-ec2-public-ip>
   ```

2. Switch to the `ec2-user` account and confirm your working directory:
   ```bash
   sudo su -l ec2-user
   pwd
   ```

3. Verify AWS CLI is working or configure it if needed:
   ```bash
   aws configure
   # AWS Access Key ID: <YOUR_KEY>
   # AWS Secret Access Key: <YOUR_SECRET>
   # Default region name: us-west-2
   # Default output format: json
   ```
4. Create a unique S3 bucket:
   ```bash
   BUCKET=<your-unique-bucket-name>
   REGION=us-west-2
   aws s3api create-bucket --bucket <your-unique-bucket-name> --region us-west-2 --create-bucket-configuration LocationConstraint=us-west-2
   ```   

5. Extract and view your website files:
   ```bash
   cd ~
   tar xvzf static-website-v2.tar.gz
   ls static-website/
   ```

6. Upload the files to S3 with public read access:
   ```bash
   cd static-website
   aws s3 website s3://<your-unique-bucket-name>/ --index-document index.html
   aws s3 cp /home/ec2-user/sysops-activity-files/static-website/ s3://<your-unique-bucket-name>/ --recursive --acl public-read
   ```

7. Add a bucket policy for public read access:

    7.1 AWS Management Console > Amazon S3 console > "your-unique-bucket-name" > Permissions > Block public access (bucket settings) > Edit

    7.2 DeSelect/UnSelect Block all public access

    7.3 Choose Save changes (confirm on the prompt)

    7.4 On to permissions tab, under Object Ownership, choose Edit

    7.5 Choose ACLs enabled

    7.6 Choose I acknowledge that ACLs will be restored.

    7.7 Choose Save changes

8. Verify the bucket contents
   ```bash
   aws s3 ls <your-unique-bucket-name>
   ```

9. Get the website URl:
    
    9.1 It can be obtained from the lab dashboard with the Bucket website endpoint
    9.2 Or obtained using
    ```bash
    curl -I "http://<your-unique-bucket-name>.s3-website-us-west-2.amazonaws.com/index.html"
    ```

## Cleanup
Do the following to unnecessary charges:
- Delete S3 bucket contents
- Delete s3 bucket itself

## Wrap-up
In this lab, I successfully:
- Created and deployed a static website hosted on S3 using SSH session
